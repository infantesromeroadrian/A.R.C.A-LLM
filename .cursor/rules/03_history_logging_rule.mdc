---
alwaysApply: true
---
## ðŸ“ Directory Structure

### Mandatory Structure:

```
project-root/
â”œâ”€â”€ historyMD/
â”‚   â”œâ”€â”€ README.md                          # Index of all history files
â”‚   â”œâ”€â”€ 2025-10-02_session-001.md         # Daily session log
â”‚   â”œâ”€â”€ 2025-10-02_session-002.md         # Second session same day
â”‚   â”œâ”€â”€ 2025-10-03_session-001.md         # Next day session
â”‚   â”œâ”€â”€ code-changes/
â”‚   â”‚   â”œâ”€â”€ 2025-10-02_001_file-created.md
â”‚   â”‚   â”œâ”€â”€ 2025-10-02_002_function-modified.md
â”‚   â”‚   â””â”€â”€ 2025-10-02_003_bug-fixed.md
â”‚   â”œâ”€â”€ decisions/
â”‚   â”‚   â”œâ”€â”€ 2025-10-02_001_architecture-choice.md
â”‚   â”‚   â”œâ”€â”€ 2025-10-02_002_library-selection.md
â”‚   â”‚   â””â”€â”€ 2025-10-03_001_database-change.md
â”‚   â”œâ”€â”€ conversations/
â”‚   â”‚   â”œâ”€â”€ 2025-10-02_001_requirements-discussion.md
â”‚   â”‚   â”œâ”€â”€ 2025-10-02_002_debugging-session.md
â”‚   â”‚   â””â”€â”€ 2025-10-03_001_feature-planning.md
â”‚   â””â”€â”€ errors-and-fixes/
â”‚       â”œâ”€â”€ 2025-10-02_001_import-error.md
â”‚       â”œâ”€â”€ 2025-10-02_002_type-mismatch.md
â”‚       â””â”€â”€ 2025-10-03_001_api-connection-issue.md
```

---

## ðŸ“ What MUST Be Logged (Mandatory)

### 1. **Every Code Change**
- âœ… Files created
- âœ… Files modified
- âœ… Files deleted
- âœ… Functions/classes added
- âœ… Functions/classes modified
- âœ… Functions/classes removed
- âœ… Configuration changes
- âœ… Dependency additions/removals

### 2. **Every Conversation**
- âœ… User questions and requests
- âœ… AI responses and explanations
- âœ… Clarifications asked by AI
- âœ… Clarifications provided by user
- âœ… Suggestions proposed
- âœ… Feedback given

### 3. **Every Decision**
- âœ… Architectural choices (and WHY)
- âœ… Technology selections (and WHY)
- âœ… Algorithm choices (and WHY)
- âœ… Design pattern selections (and WHY)
- âœ… Trade-offs made
- âœ… Alternatives considered but rejected

### 4. **Every Error and Fix**
- âœ… Errors encountered
- âœ… Error messages
- âœ… Root cause analysis
- âœ… Solution implemented
- âœ… Testing performed
- âœ… Verification of fix

### 5. **Every Progress Milestone**
- âœ… Features completed
- âœ… Bugs fixed
- âœ… Tests passed
- âœ… Documentation updated
- âœ… Refactoring done
- âœ… Performance improvements

### 6. **Every Context Change**
- âœ… Scope changes
- âœ… Requirement updates
- âœ… Priority shifts
- âœ… Timeline adjustments
- âœ… Resource changes

---

## ðŸ“‹ Session Log Template

Every session MUST start with creating a new session log using this template:

```markdown
# Development Session Log

**Date:** YYYY-MM-DD  
**Session Number:** 001  
**Start Time:** HH:MM  
**End Time:** HH:MM  
**Duration:** X hours Y minutes  
**Developer/User:** [Name]  
**AI Assistant:** Claude Sonnet 4.5 (or applicable model)

---

## Session Objective

[Brief description of what this session aims to accomplish]

---

## Context from Previous Session

[Summary of relevant context from last session, or "First session - no previous context"]

---

## Conversation Log

### [HH:MM] - User Request
**User:**
> [Exact user message or paraphrased request]

**AI Response:**
> [Summary of AI response and actions taken]

**Actions Taken:**
- Created file: `path/to/file.py`
- Modified function: `function_name()` in `file.py`
- Ran command: `pytest tests/`

**Result:**
- [Success/Failure]
- [Any output or errors]

---

### [HH:MM] - Code Change
**File:** `path/to/file.py`  
**Type:** [Creation/Modification/Deletion]  
**Reason:** [Why this change was needed]

**Before:**
```python
# Previous code (if modification)
```

**After:**
```python
# New code
```

**Impact:**
- [What this change affects]
- [Any dependencies updated]

---

### [HH:MM] - Decision Made
**Decision:** [Brief title of decision]  
**Context:** [Why this decision was necessary]  
**Options Considered:**
1. Option A: [Description] - Pros: [...] - Cons: [...]
2. Option B: [Description] - Pros: [...] - Cons: [...]
3. Option C: [Description] - Pros: [...] - Cons: [...]

**Chosen:** Option B  
**Rationale:** [Detailed explanation of why this option was chosen]  
**Trade-offs Accepted:** [What we're giving up with this choice]

---

### [HH:MM] - Error Encountered
**Error Type:** [Import Error/Runtime Error/Logic Error/etc.]  
**Error Message:**
```
[Full error traceback]
```

**Context:** [What was being done when error occurred]  
**Root Cause:** [Analysis of what caused the error]  
**Solution:** [How it was fixed]  
**Prevention:** [How to avoid this in the future]

---

## Files Modified This Session

| Time | File Path | Action | Reason |
|------|-----------|--------|--------|
| HH:MM | `src/main.py` | Modified | Added error handling |
| HH:MM | `src/utils.py` | Created | New utility functions |
| HH:MM | `tests/test_main.py` | Modified | Updated tests for new logic |

---

## Decisions Made This Session

| Time | Decision | Impact | Status |
|------|----------|--------|--------|
| HH:MM | Use PostgreSQL over MongoDB | Database choice | Implemented |
| HH:MM | Implement caching layer | Performance | Planned |

---

## Errors and Fixes This Session

| Time | Error | Solution | Verification |
|------|-------|----------|--------------|
| HH:MM | Import error in module X | Fixed path in `__init__.py` | Tests passing |
| HH:MM | Type mismatch in function Y | Added type hints and validation | Linter clean |

---

## Progress Summary

### Completed âœ…
- [Task 1 description]
- [Task 2 description]
- [Task 3 description]

### In Progress ðŸ”„
- [Task being worked on]

### Blocked â›”
- [Any blockers encountered]

### Next Steps â­ï¸
- [ ] Task to do next session
- [ ] Another pending task
- [ ] Third task in queue

---

## Metrics

- **Lines of Code Added:** +XXX
- **Lines of Code Removed:** -XXX
- **Files Created:** X
- **Files Modified:** X
- **Files Deleted:** X
- **Tests Added:** X
- **Tests Passing:** X/X
- **Bugs Fixed:** X
- **Features Completed:** X

---

## Knowledge Gained / Lessons Learned

1. **Lesson 1:** [What was learned]
   - **Application:** [How this can be applied in future]

2. **Lesson 2:** [What was learned]
   - **Application:** [How this can be applied in future]

---

## Technical Debt Identified

- [ ] [Technical debt item 1]
- [ ] [Technical debt item 2]

---

## Notes for Next Session

[Any important notes, reminders, or context for the next development session]

---

**Session Status:** [Completed/Interrupted/Paused]  
**Overall Progress:** [X%] toward project completion
```

---

## ðŸ”„ AI Assistant Behavior (Mandatory)

### âœ… MUST DO (Non-Negotiable)

1. **At Session Start:**
   ```
   - Check if historyMD/ directory exists
   - If not, create it with proper structure
   - Create new session log file with timestamp
   - Ask user for session objective
   - Reference previous session (if exists)
   ```

2. **During Every Interaction:**
   ```
   - Log the user's request/question
   - Log the AI's response/explanation
   - Log all actions taken (files created/modified/deleted)
   - Log all commands executed
   - Log all results (success/failure/output)
   - Update the session log in REAL-TIME
   ```

3. **After Every Code Change:**
   ```
   - Document WHAT changed
   - Document WHY it changed
   - Document WHAT the impact is
   - Show before/after (for modifications)
   - Update metrics (lines added/removed, etc.)
   ```

4. **After Every Decision:**
   ```
   - Document the decision made
   - Document alternatives considered
   - Document rationale for choice
   - Document trade-offs accepted
   - Create separate decision file in decisions/
   ```

5. **After Every Error:**
   ```
   - Document the error encountered
   - Document root cause analysis
   - Document solution implemented
   - Document verification steps
   - Create separate error file in errors-and-fixes/
   ```

6. **At Session End:**
   ```
   - Update progress summary
   - Calculate metrics
   - Document lessons learned
   - Identify technical debt
   - Write notes for next session
   - Update README.md index
   ```

### âŒ NEVER DO (Forbidden)

1. **âŒ Never skip logging** - Even "small" changes must be documented
2. **âŒ Never assume "it's not important"** - Everything is important for the history
3. **âŒ Never batch multiple changes without individual logging** - Each change gets its own entry
4. **âŒ Never delete history files** - History is permanent and append-only
5. **âŒ Never modify past history entries** - Only append new information or corrections

---

## ðŸ“Š Code Change Documentation Template

For each significant code change, create a detailed file:

```markdown
# Code Change: [Brief Description]

**Date:** YYYY-MM-DD  
**Time:** HH:MM  
**Change ID:** YYYY-MM-DD_XXX  
**Session:** session-XXX  
**Type:** [Creation/Modification/Deletion/Refactoring]

---

## Context

**Why this change was needed:**
[Detailed explanation of the problem or requirement that led to this change]

**Related to:**
- User request: [Link to conversation log]
- Bug: [Link to error log if applicable]
- Feature: [Feature name]

---

## Files Affected

### Primary Changes:
- `path/to/file1.py` - [Description of changes]
- `path/to/file2.py` - [Description of changes]

### Secondary Changes (Dependencies):
- `path/to/test_file.py` - [Updated tests]
- `requirements.txt` - [New dependencies]

---

## Detailed Changes

### File: `path/to/file1.py`

**Function/Class:** `ClassName.method_name()`

**Before:**
```python
def old_function(param1):
    # Old implementation
    return result
```

**After:**
```python
def new_function(param1, param2):
    """
    Improved implementation with additional parameter.
    
    Args:
        param1: Description
        param2: Description
    
    Returns:
        Improved result
    """
    # New implementation with better logic
    return enhanced_result
```

**Changes Made:**
1. Added `param2` parameter for better flexibility
2. Improved algorithm efficiency from O(nÂ²) to O(n)
3. Added comprehensive docstring
4. Added input validation
5. Added error handling

**Rationale:**
[Explanation of why each change improves the code]

---

## Testing

**Tests Added:**
```python
def test_new_function():
    assert new_function(param1, param2) == expected_result
```

**Test Results:**
```
pytest tests/test_file.py::test_new_function
PASSED âœ…
```

**Coverage:**
- Before: 75%
- After: 92%

---

## Impact Analysis

### Performance:
- **Before:** 2.5 seconds for 1000 items
- **After:** 0.3 seconds for 1000 items
- **Improvement:** 733% faster

### Breaking Changes:
- âš ï¸ Function signature changed (added parameter)
- âœ… Backward compatibility maintained via default parameter value

### Dependencies:
- Added: `library-name==1.2.3`
- Updated: None
- Removed: None

### Affected Modules:
- `module_a.py` - Uses this function (updated)
- `module_b.py` - Uses this function (updated)

---

## Rollback Plan

**If this change causes issues:**
```bash
git revert [commit-hash]
# OR
git checkout [previous-commit-hash] -- path/to/file.py
```

**Alternative implementation:**
[Description of alternative if this doesn't work]

---

## Verification Checklist

- [x] Code compiles without errors
- [x] All tests pass
- [x] Linter shows no errors
- [x] Type hints validated
- [x] Documentation updated
- [x] Peer review completed (if applicable)
- [x] Manual testing performed

---

## Related Links

- Session Log: `historyMD/2025-10-02_session-001.md#HH:MM`
- Conversation: `historyMD/conversations/2025-10-02_001_feature-discussion.md`
- Decision: `historyMD/decisions/2025-10-02_001_algorithm-choice.md`

---

**Status:** âœ… Completed and Verified  
**Reviewed By:** [User/AI/Both]
```

---

## ðŸ“‹ Decision Documentation Template

For every significant decision:

```markdown
# Decision: [Brief Title]

**Date:** YYYY-MM-DD  
**Time:** HH:MM  
**Decision ID:** YYYY-MM-DD_XXX  
**Session:** session-XXX  
**Category:** [Architecture/Technology/Design/Algorithm/Process]

---

## Context

**Problem Statement:**
[Clear description of the problem or need that requires a decision]

**Constraints:**
- Budget: [Budget constraints if any]
- Timeline: [Time constraints]
- Technical: [Technical limitations]
- Team: [Team skill constraints]

**Stakeholders:**
- User/Client
- Development Team
- AI Assistant

---

## Options Analyzed

### Option 1: [Name]

**Description:**
[Detailed description of this option]

**Pros:**
- âœ… Pro 1
- âœ… Pro 2
- âœ… Pro 3

**Cons:**
- âŒ Con 1
- âŒ Con 2
- âŒ Con 3

**Cost/Effort:**
- Time: [Estimate]
- Money: [Estimate]
- Complexity: [Low/Medium/High]

**Risk Level:** [Low/Medium/High]

---

### Option 2: [Name]

**Description:**
[Detailed description of this option]

**Pros:**
- âœ… Pro 1
- âœ… Pro 2
- âœ… Pro 3

**Cons:**
- âŒ Con 1
- âŒ Con 2
- âŒ Con 3

**Cost/Effort:**
- Time: [Estimate]
- Money: [Estimate]
- Complexity: [Low/Medium/High]

**Risk Level:** [Low/Medium/High]

---

### Option 3: [Name]

**Description:**
[Detailed description of this option]

**Pros:**
- âœ… Pro 1
- âœ… Pro 2
- âœ… Pro 3

**Cons:**
- âŒ Con 1
- âŒ Con 2
- âŒ Con 3

**Cost/Effort:**
- Time: [Estimate]
- Money: [Estimate]
- Complexity: [Low/Medium/High]

**Risk Level:** [Low/Medium/High]

---

## Decision Made

**Chosen Option:** Option 2 - [Name]

**Rationale:**
[Detailed explanation of why this option was chosen over the others. Include specific reasons tied to the project's goals, constraints, and context.]

**Key Factors:**
1. Factor 1: [How this influenced the decision]
2. Factor 2: [How this influenced the decision]
3. Factor 3: [How this influenced the decision]

---

## Trade-offs Accepted

**What we're gaining:**
- Benefit 1
- Benefit 2
- Benefit 3

**What we're sacrificing:**
- Trade-off 1: [How we'll mitigate this]
- Trade-off 2: [How we'll mitigate this]

---

## Implementation Plan

**Steps:**
1. [Step 1]
2. [Step 2]
3. [Step 3]

**Timeline:** [When this will be implemented]

**Dependencies:**
- [Dependency 1]
- [Dependency 2]

---

## Success Metrics

**How we'll know this was the right decision:**
- Metric 1: [Target value]
- Metric 2: [Target value]
- Metric 3: [Target value]

**Review Date:** [When we'll evaluate if this decision was correct]

---

## Rollback Strategy

**If this decision proves wrong:**
[Plan for how to undo or pivot from this decision]

**Early Warning Signs:**
- Sign 1: [What would indicate this isn't working]
- Sign 2: [What would indicate this isn't working]

---

## Related Links

- Session Log: `historyMD/2025-10-02_session-001.md#HH:MM`
- Conversation: `historyMD/conversations/2025-10-02_001_decision-discussion.md`
- Code Changes: `historyMD/code-changes/2025-10-02_001_implementation.md`

---

**Status:** âœ… Decided and Documented  
**Decision Maker:** [User/AI/Collaborative]
```

---

## ðŸ” README.md Index Template

The `historyMD/README.md` serves as the master index:

```markdown
# Project Development History

**Project Name:** [Project Name]  
**Start Date:** YYYY-MM-DD  
**Last Updated:** YYYY-MM-DD  
**Total Sessions:** XXX  
**Total Development Hours:** XXX

---

## Quick Links

- [Latest Session](#latest-session)
- [All Sessions](#session-index)
- [Major Decisions](#decision-index)
- [Critical Bugs Fixed](#error-index)
- [Key Milestones](#milestone-index)

---

## Project Overview

**Current Status:** [Active Development/In Testing/Production/Maintenance]  
**Current Phase:** [Requirements/Design/Implementation/Testing/Deployment]  
**Progress:** XX% Complete

**Current Sprint/Milestone:**
[Description of current work focus]

---

## Latest Session

**Date:** YYYY-MM-DD  
**Session:** [session-XXX](./2025-10-02_session-XXX.md)  
**Summary:** [Brief summary of what was accomplished]

**Key Achievements:**
- Achievement 1
- Achievement 2

---

## Session Index

| Date | Session | Duration | Focus | Status | Link |
|------|---------|----------|-------|--------|------|
| 2025-10-03 | 001 | 3h 15m | Feature X implementation | âœ… Complete | [Link](./2025-10-03_session-001.md) |
| 2025-10-02 | 002 | 2h 30m | Bug fixing | âœ… Complete | [Link](./2025-10-02_session-002.md) |
| 2025-10-02 | 001 | 4h 00m | Initial setup | âœ… Complete | [Link](./2025-10-02_session-001.md) |

**Total Sessions:** 3  
**Total Development Time:** 9h 45m

---

## Decision Index

| Date | ID | Decision | Category | Impact | Link |
|------|----|----------|----------|--------|------|
| 2025-10-03 | 001 | Database choice: PostgreSQL | Architecture | High | [Link](./decisions/2025-10-03_001_database-choice.md) |
| 2025-10-02 | 002 | Use PyTorch over TensorFlow | Technology | High | [Link](./decisions/2025-10-02_002_framework-choice.md) |
| 2025-10-02 | 001 | Microservices architecture | Architecture | Critical | [Link](./decisions/2025-10-02_001_architecture-choice.md) |

---

## Error Index

| Date | ID | Error | Severity | Resolution | Link |
|------|----|-------|----------|------------|------|
| 2025-10-03 | 001 | API timeout issue | High | Implemented retry logic | [Link](./errors-and-fixes/2025-10-03_001_api-timeout.md) |
| 2025-10-02 | 002 | Memory leak in processing | Critical | Fixed buffer management | [Link](./errors-and-fixes/2025-10-02_002_memory-leak.md) |
| 2025-10-02 | 001 | Import circular dependency | Medium | Refactored module structure | [Link](./errors-and-fixes/2025-10-02_001_import-error.md) |

---

## Milestone Index

| Date | Milestone | Description | Status |
|------|-----------|-------------|--------|
| 2025-10-05 | MVP Release | Minimum viable product ready | ðŸ”„ In Progress |
| 2025-10-03 | Database Setup | Database configured and migrated | âœ… Complete |
| 2025-10-02 | Project Setup | Initial project structure | âœ… Complete |

---

## Key Metrics

### Code Statistics
- **Total Files:** XXX
- **Total Lines of Code:** XXX
- **Test Coverage:** XX%
- **Documentation Coverage:** XX%

### Development Velocity
- **Average Session Duration:** Xh XXm
- **Features Completed:** XX
- **Bugs Fixed:** XX
- **Tests Written:** XX

### Quality Metrics
- **Linter Errors:** X
- **Type Coverage:** XX%
- **Security Issues:** X
- **Technical Debt Items:** XX

---

## Technology Stack

### Languages
- Python 3.11
- [Other languages]

### Frameworks & Libraries
- PyTorch 2.0
- FastAPI
- [Other frameworks]

### Infrastructure
- Docker
- PostgreSQL
- [Other infrastructure]

---

## Major Changes Timeline

```
2025-10-03 â”€â”¬â”€ Added authentication system
            â”œâ”€ Implemented user management
            â””â”€ Database optimization

2025-10-02 â”€â”¬â”€ Initial project setup
            â”œâ”€ Core architecture defined
            â””â”€ Basic API endpoints created
```

---

## Knowledge Base

### Lessons Learned
- [Link to lessons learned document]

### Best Practices Established
- [Link to best practices document]

### Common Issues & Solutions
- [Link to troubleshooting guide]

---

## Team Notes

### Code Conventions
[Summary or link to code conventions]

### Git Workflow
[Summary or link to git workflow]

### Review Process
[Summary or link to review process]

---

**Last Updated:** YYYY-MM-DD HH:MM  
**Maintained By:** AI Assistant + Development Team
```

---

## ðŸ¤– Automation Recommendations

### Suggested Tools

1. **Auto-commit history files:**
```bash
#!/bin/bash
# After each session, commit history
cd historyMD/
git add .
git commit -m "History: Session $(date +%Y-%m-%d_%H-%M)"
git push
```

2. **Generate metrics report:**
```python
# Script to analyze history files and generate metrics
def analyze_history():
    # Count files created/modified
    # Calculate development velocity
    # Identify patterns
    # Generate report
```

3. **Create session templates:**
```bash
# Helper script to start new session
python create_session.py --date $(date +%Y-%m-%d)
```

---

## ðŸ“ˆ Benefits of This System

### For Learning
- Complete record of development journey
- Understand decision-making process
- Learn from mistakes and successes
- Track knowledge growth

### For Auditing
- Full traceability of all changes
- Justify decisions with documented rationale
- Compliance and governance support
- Security audit trail

### For Collaboration
- New team members can understand history
- Context for every decision available
- Patterns and practices documented
- Handoff documentation built-in

### For Project Management
- Accurate time tracking
- Velocity metrics
- Risk identification
- Progress monitoring

---

## ðŸŽ“ Philosophy

> **"The code tells you WHAT was done. The history tells you WHY it was done."**

**Remember:**
- Code without context is hard to maintain
- Decisions without rationale are hard to defend
- Changes without documentation are hard to understand
- History without detail is hard to learn from

**This is not overhead - this is investment in:**
- Future maintainability
- Team knowledge transfer
- Personal learning
- Project success

---

## âœ… Compliance Checklist

Before ending any session, verify:

- [ ] Session log file created with timestamp
- [ ] All user requests logged
- [ ] All AI responses logged
- [ ] All code changes documented
- [ ] All decisions documented with rationale
- [ ] All errors documented with fixes
- [ ] Progress summary updated
- [ ] Metrics calculated
- [ ] Next steps identified
- [ ] README.md index updated
- [ ] Files organized in correct subdirectories
- [ ] Links between related documents created

**Only when ALL items are checked can the session be considered complete.**

---

**Version:** 1.0  
**Last Updated:** October 2025  
**Author:** AI Engineer Path - Cursor Rules  
**Status:** Mandatory for ALL Projects

