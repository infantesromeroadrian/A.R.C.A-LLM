---
description: 
globs: 
alwaysApply: true
---
---
description: Mandatory CSV tracking system that logs EVERY interaction, code change, and decision in real-time. The AI Assistant MUST update the tracking CSV after each interaction.
globs: tracking/*.csv
alwaysApply: true
---

# ðŸ“Š Mandatory Real-Time CSV Tracking Rule

## ðŸš¨ CRITICAL: This Rule is MANDATORY and AUTOMATIC

This rule REQUIRES the AI Assistant to:
1. âœ… Create tracking CSV on first interaction
2. âœ… Add a new row AFTER EVERY interaction
3. âœ… Update the CSV in REAL-TIME (not batched)
4. âœ… NEVER skip logging any interaction

---

## ðŸ“ Mandatory File Structure

### **Required File:**
```
project-root/
â”œâ”€â”€ tracking/
â”‚   â”œâ”€â”€ project_tracking.csv       # Main tracking file (REQUIRED)
â”‚   â””â”€â”€ README.md                  # Tracking index (auto-generated)
```

### **CSV Location:**
- **Primary:** `tracking/project_tracking.csv`
- **Backup:** Created automatically every 100 entries

---

## ðŸ“‹ CSV Structure (Mandatory Columns)

### **Complete Column List:**

```csv
Timestamp,Session_ID,Action_Type,Task_Description,File_Path,Ticket_ID,Status,Lines_Added,Lines_Removed,Duration_Minutes,Error_Message,Tools_Used,Related_Requirement,AI_Confidence,Next_Action
```

### **Column Definitions:**

| Column | Type | Required | Description | Example |
|--------|------|----------|-------------|---------|
| **Timestamp** | datetime | âœ… YES | Exact date and time | 2025-10-04 14:30:25 |
| **Session_ID** | string | âœ… YES | Session from historyMD | session-001 |
| **Action_Type** | enum | âœ… YES | Type of action | created, modified, deleted, error, decision, query |
| **Task_Description** | string | âœ… YES | What was done | "Implemented data preprocessing pipeline" |
| **File_Path** | string | âš ï¸ IF APPLICABLE | Path to file | src/data/preprocessing.py |
| **Ticket_ID** | string | âš ï¸ IF APPLICABLE | Related ticket | TICKET-005 |
| **Status** | enum | âœ… YES | Result of action | success, error, blocked, in_progress |
| **Lines_Added** | integer | âš ï¸ IF CODE | Lines added | 156 |
| **Lines_Removed** | integer | âš ï¸ IF CODE | Lines removed | 42 |
| **Duration_Minutes** | integer | âœ… YES | Time taken | 15 |
| **Error_Message** | string | âš ï¸ IF ERROR | Error details | "ImportError: module 'pandas' not found" |
| **Tools_Used** | string | âš ï¸ IF APPLICABLE | Libraries/frameworks | "pandas, scikit-learn, pytest" |
| **Related_Requirement** | string | âš ï¸ IF APPLICABLE | From requirements.md | REQ-005: Data Pipeline |
| **AI_Confidence** | enum | âœ… YES | Confidence level | high, medium, low |
| **Next_Action** | string | âœ… YES | What's next | "Add unit tests", "Deploy to staging" |

---

## ðŸ¤– AI Assistant Behavior (MANDATORY)

### âœ… AT START OF SESSION:

```python
1. Check if tracking/project_tracking.csv exists
2. If NOT exists:
   - Create tracking/ directory
   - Create project_tracking.csv with headers
   - Add first row with session start info
3. If exists:
   - Verify CSV integrity
   - Add session start row
   - Get current session_id from historyMD
```

### âœ… AFTER EVERY INTERACTION:

**The AI MUST:**
1. Identify what action was performed
2. Gather all relevant data for CSV columns
3. Append new row to project_tracking.csv
4. Verify the row was written successfully
5. Continue with next task

**NEVER skip this step, even for "small" interactions.**

### âœ… WHEN WRITING FILES:

```python
# If creating/modifying a file:
Action_Type = "created" or "modified"
File_Path = "src/path/to/file.py"
Lines_Added = count_new_lines()
Lines_Removed = count_deleted_lines()
Status = "success" if no_errors else "error"
```

### âœ… WHEN MAKING DECISIONS:

```python
# If making architectural/technical decision:
Action_Type = "decision"
Task_Description = "Chose PostgreSQL over MongoDB"
File_Path = ""  # Not applicable
Related_Requirement = "REQ-003"
Tools_Used = "PostgreSQL"
Next_Action = "Setup database schema"
```

### âœ… WHEN ERRORS OCCUR:

```python
# If error encountered:
Action_Type = "error"
Task_Description = "Failed to import module"
Status = "error"
Error_Message = "Full error traceback here"
Next_Action = "Install missing dependencies"
```

### âœ… WHEN USER ASKS QUESTION:

```python
# If answering query without code:
Action_Type = "query"
Task_Description = "Explained how RAG works"
File_Path = ""
Status = "success"
Tools_Used = "ChromaDB, OpenAI"
Next_Action = "Implement RAG pipeline"
```

---

## ðŸ“Š CSV Template

### **Initial CSV Creation:**

When creating `tracking/project_tracking.csv` for the first time:

```csv
Timestamp,Session_ID,Action_Type,Task_Description,File_Path,Ticket_ID,Status,Lines_Added,Lines_Removed,Duration_Minutes,Error_Message,Tools_Used,Related_Requirement,AI_Confidence,Next_Action
2025-10-04 14:30:00,session-001,session_start,Started new development session,,,success,0,0,0,,,REQ-001,high,Review requirements document
```

### **Example Entries:**

```csv
Timestamp,Session_ID,Action_Type,Task_Description,File_Path,Ticket_ID,Status,Lines_Added,Lines_Removed,Duration_Minutes,Error_Message,Tools_Used,Related_Requirement,AI_Confidence,Next_Action
2025-10-04 14:30:00,session-001,session_start,Started new development session,,,success,0,0,0,,,REQ-001,high,Review requirements document
2025-10-04 14:35:12,session-001,created,Implemented data preprocessing pipeline,src/data/preprocessing.py,TICKET-001,success,156,0,5,,"pandas, numpy",REQ-005,high,Add unit tests
2025-10-04 14:42:30,session-001,modified,Added error handling to preprocessing,src/data/preprocessing.py,TICKET-001,success,23,5,7,,pandas,REQ-005,high,Test error cases
2025-10-04 14:50:15,session-001,created,Created unit tests for preprocessing,tests/test_preprocessing.py,TICKET-001,success,89,0,8,,"pytest, pandas",REQ-005,medium,Run tests
2025-10-04 14:55:00,session-001,error,Import error in test file,tests/test_preprocessing.py,TICKET-001,error,0,0,5,"ModuleNotFoundError: No module named 'pytest'",pytest,,low,Install pytest
2025-10-04 14:57:30,session-001,modified,Fixed import error,tests/test_preprocessing.py,TICKET-001,success,2,1,2,,pytest,REQ-005,high,Run tests again
2025-10-04 15:00:00,session-001,decision,Chose StandardScaler over MinMaxScaler,,,success,0,0,3,,"scikit-learn, pandas",REQ-005,high,Document decision in historyMD
2025-10-04 15:05:00,session-001,query,Explained difference between fit and transform,,,success,0,0,5,,scikit-learn,REQ-005,high,Continue with model training
```

---

## ðŸ”„ Workflow Integration

### **How this integrates with other rules:**

```
User asks something
       â†“
AI responds/acts
       â†“
03_history_logging_rule.mdc (logs context in historyMD/)
       â†“
06_project_tracking.mdc (logs metrics in CSV) â† YOU ARE HERE
       â†“
05_ticket_system_rule.mdc (updates ticket status if applicable)
```

**Both 03 and 06 run in parallel:**
- **03** = Qualitative documentation (why, how, context)
- **06** = Quantitative tracking (metrics, time, status)

---

## ðŸ“ˆ CSV Usage Examples

### **View Recent Activity:**
```python
import pandas as pd

df = pd.read_csv('tracking/project_tracking.csv')
print(df.tail(10))  # Last 10 interactions
```

### **Calculate Session Metrics:**
```python
session_df = df[df['Session_ID'] == 'session-001']
total_lines_added = session_df['Lines_Added'].sum()
total_duration = session_df['Duration_Minutes'].sum()
success_rate = len(session_df[session_df['Status'] == 'success']) / len(session_df) * 100

print(f"Session Stats:")
print(f"  Lines Added: {total_lines_added}")
print(f"  Duration: {total_duration} minutes")
print(f"  Success Rate: {success_rate:.1f}%")
```

### **Find Errors:**
```python
errors = df[df['Status'] == 'error']
print(f"Total errors: {len(errors)}")
print(errors[['Timestamp', 'Task_Description', 'Error_Message']])
```

### **Track Ticket Progress:**
```python
ticket_df = df[df['Ticket_ID'] == 'TICKET-001']
print(f"Actions for TICKET-001: {len(ticket_df)}")
print(f"Status: {ticket_df['Status'].value_counts().to_dict()}")
```

---

## ðŸš¨ MANDATORY Rules for AI Assistant

### âœ… ALWAYS DO:

1. **Create CSV if missing** at session start
2. **Add row immediately** after every interaction
3. **Fill all required columns** (even if with empty string)
4. **Use exact column names** as specified
5. **Use enum values** exactly (success/error/blocked/in_progress)
6. **Verify CSV is valid** after writing
7. **Log errors** if CSV write fails

### âŒ NEVER DO:

1. **Skip logging** - Every interaction MUST be logged
2. **Batch updates** - Log immediately, not at end of session
3. **Modify existing rows** - Only append new rows
4. **Delete entries** - CSV is append-only
5. **Assume CSV exists** - Always check first
6. **Use wrong column names** - Match exactly
7. **Leave required columns empty** - Use "N/A" or 0 if not applicable

---

## ðŸ“Š Action Type Definitions

### **Valid Action_Type values:**

| Action_Type | When to Use | Example |
|-------------|-------------|---------|
| **session_start** | Beginning of new session | "Started development session" |
| **session_end** | End of session | "Ended session, all tasks completed" |
| **created** | New file created | Created `src/api/main.py` |
| **modified** | Existing file changed | Modified `src/utils/helpers.py` |
| **deleted** | File removed | Deleted `old_test.py` |
| **error** | Error encountered | Import error, syntax error |
| **decision** | Technical decision made | Chose PostgreSQL over MongoDB |
| **query** | Answered user question | Explained how async works |
| **test** | Ran tests | Executed pytest tests |
| **deployment** | Deployed code | Deployed to staging |
| **documentation** | Updated docs | Added API documentation |
| **refactor** | Code refactoring | Refactored data pipeline |
| **review** | Code review | Reviewed PR changes |

---

## ðŸ“‹ Example Real Session

### **Complete session tracking:**

```csv
Timestamp,Session_ID,Action_Type,Task_Description,File_Path,Ticket_ID,Status,Lines_Added,Lines_Removed,Duration_Minutes,Error_Message,Tools_Used,Related_Requirement,AI_Confidence,Next_Action
2025-10-04 14:00:00,session-001,session_start,Started work on data pipeline,,,success,0,0,0,,,REQ-005,high,Read ticket TICKET-001
2025-10-04 14:02:00,session-001,query,User asked about preprocessing approaches,,,success,0,0,2,,,REQ-005,high,Implement chosen approach
2025-10-04 14:05:00,session-001,decision,Chose pandas for data processing,,,success,0,0,3,,pandas,REQ-005,high,Create preprocessing module
2025-10-04 14:10:00,session-001,created,Created preprocessing pipeline,src/data/preprocessing.py,TICKET-001,success,156,0,5,,"pandas, numpy",REQ-005,high,Add error handling
2025-10-04 14:17:00,session-001,modified,Added try-except blocks,src/data/preprocessing.py,TICKET-001,success,23,5,7,,pandas,REQ-005,high,Create tests
2025-10-04 14:25:00,session-001,created,Created unit tests,tests/test_preprocessing.py,TICKET-001,success,89,0,8,,"pytest, pandas",REQ-005,medium,Run tests
2025-10-04 14:30:00,session-001,test,Ran pytest tests,tests/test_preprocessing.py,TICKET-001,success,0,0,5,,pytest,REQ-005,high,All tests passed
2025-10-04 14:35:00,session-001,documentation,Updated README with preprocessing info,README.md,TICKET-001,success,12,0,5,,,REQ-005,high,Commit changes
2025-10-04 14:37:00,session-001,session_end,Completed TICKET-001 successfully,,,success,0,0,2,,,REQ-005,high,Move ticket to COMPLETED
```

---

## âœ… Validation Checklist

Before ending any interaction, the AI MUST verify:

- [ ] CSV file exists at `tracking/project_tracking.csv`
- [ ] New row was appended to CSV
- [ ] All required columns have values
- [ ] Timestamp is correct format (YYYY-MM-DD HH:MM:SS)
- [ ] Action_Type is valid enum value
- [ ] Status is valid enum value
- [ ] Session_ID matches current session
- [ ] CSV is still valid (not corrupted)

---

## ðŸŽ¯ Success Metrics

### **What makes this rule successful:**

1. **100% Coverage** - Every interaction logged
2. **Real-time Updates** - No delays or batching
3. **Data Quality** - All columns filled correctly
4. **CSV Integrity** - Never corrupted or invalid
5. **User Visibility** - Easy to read and analyze

### **How to verify it's working:**

```python
# Check if AI is logging correctly
import pandas as pd

df = pd.read_csv('tracking/project_tracking.csv')

# Should have entries for every interaction
print(f"Total interactions logged: {len(df)}")

# Should have recent entries
latest = df.tail(1)['Timestamp'].values[0]
print(f"Latest entry: {latest}")

# Should have no missing required fields
required_cols = ['Timestamp', 'Session_ID', 'Action_Type', 'Task_Description', 'Status', 'AI_Confidence', 'Next_Action']
for col in required_cols:
    missing = df[col].isna().sum()
    print(f"{col}: {missing} missing values")
```

---

## ðŸš¨ Error Handling

### **If CSV write fails:**

```python
try:
    # Append to CSV
    append_row_to_csv(row_data)
except Exception as e:
    # Log to backup location
    with open('tracking/backup_log.txt', 'a') as f:
        f.write(f"[ERROR] Failed to write to CSV: {e}\n")
        f.write(f"Data: {row_data}\n")
    
    # Notify user
    print(f"âš ï¸ Warning: CSV tracking failed, logged to backup")
```

---

## ðŸ“š Integration with Other Rules

### **How this works with:**

**03_history_logging_rule.mdc:**
- 03 provides context (why, how, decisions)
- 06 provides metrics (what, when, status)
- Both run in parallel, complementary

**05_ticket_system_rule.mdc:**
- 06 tracks which ticket is being worked on
- 05 organizes tickets (BACKLOG â†’ IN_PROGRESS)
- 06 logs every action on that ticket

**00_master_workflow_rule.mdc:**
- 00 determines which phase we're in
- 06 logs everything in all phases
- Always active in Phase 1, 2, and 3

---

## ðŸ’¡ Philosophy

> **"If it's not tracked, it didn't happen. If it's not measured, it can't be improved."**

**Benefits:**
- âœ… Complete visibility of project progress
- âœ… Quantitative metrics for analysis
- âœ… Easy to export and visualize
- âœ… Accountability and transparency
- âœ… Pattern recognition (what takes longest, most errors, etc.)

**Remember:**
- This is MANDATORY, not optional
- Every interaction must be logged
- Real-time updates, no batching
- Simple CSV format = Universal compatibility

---

**Version:** 2.0 (Mandatory Real-Time Tracking)
**Last Updated:** October 2025  
**Author:** AI Engineer Path - Cursor Rules  
**Status:** MANDATORY RULE - Always Active  
**Priority:** HIGH (Must execute after every interaction)
